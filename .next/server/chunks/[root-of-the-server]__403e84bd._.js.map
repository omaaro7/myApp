{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omar/Desktop/studio/src/app/api/file/%5B...path%5D/route.ts"],"sourcesContent":["// src\\app\\api\\file\\[...path]\\route.ts\nimport { NextResponse } from 'next/server';\nimport { createReadStream } from 'fs';\nimport { stat, unlink } from 'fs/promises';\nimport path from 'path';\n\nexport async function GET(\n  request: Request,\n  { params }: { params: { path: string[] } }\n) {\n  try {\n    // Reconstruct the file path from the URL parameters\n    const filePath = path.join(process.cwd(), 'uploads', ...params.path);\n\n    // Check if file exists and get its stats\n    const stats = await stat(filePath);\n    if (!stats.isFile()) {\n      return NextResponse.json(\n        { error: 'Not found' },\n        { status: 404 }\n      );\n    }\n\n    // Create a readable stream of the file\n    const fileStream = createReadStream(filePath);\n\n    // Determine content type based on file extension\n    const ext = path.extname(filePath).toLowerCase();\n    const contentType = {\n      '.jpg': 'image/jpeg',\n      '.jpeg': 'image/jpeg',\n      '.png': 'image/png',\n      '.gif': 'image/gif',\n      '.mp3': 'audio/mpeg',\n      '.mp4': 'video/mp4',\n      '.webm': 'audio/webm',\n      '.pdf': 'application/pdf',\n    }[ext] || 'application/octet-stream';\n\n    // Return the file stream with appropriate headers\n    return new NextResponse(fileStream as any, {\n      headers: {\n        'Content-Type': contentType,\n        'Content-Length': stats.size.toString(),\n        'Cache-Control': 'public, max-age=31536000',\n      },\n    });\n\n  } catch (error) {\n    console.error('Error serving file:', error);\n    return NextResponse.json(\n      { error: 'Error serving file' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function DELETE(\n  request: Request,\n  { params }: { params: { path: string[] } }\n) {\n  try {\n    // Reconstruct the file path from the URL parameters\n    const filePath = path.join(process.cwd(), 'uploads', ...params.path);\n\n    // Check if file exists\n    await stat(filePath);\n\n    // Delete the file\n    await unlink(filePath);\n\n    return NextResponse.json({ message: 'File deleted successfully' });\n\n  } catch (error: any) {\n    if (error.code === 'ENOENT') {\n      return NextResponse.json(\n        { error: 'File not found' },\n        { status: 404 }\n      );\n    }\n    console.error('Error deleting file:', error);\n    return NextResponse.json(\n      { error: 'Error deleting file' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;AACtC;AACA;AACA;AACA;;;;;AAEO,eAAe,IACpB,OAAgB,EAChB,EAAE,MAAM,EAAkC;IAE1C,IAAI;QACF,oDAAoD;QACpD,MAAM,WAAW,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,cAAc,OAAO,IAAI;QAEnE,yCAAyC;QACzC,MAAM,QAAQ,MAAM,CAAA,GAAA,qHAAA,CAAA,OAAI,AAAD,EAAE;QACzB,IAAI,CAAC,MAAM,MAAM,IAAI;YACnB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAY,GACrB;gBAAE,QAAQ;YAAI;QAElB;QAEA,uCAAuC;QACvC,MAAM,aAAa,CAAA,GAAA,6FAAA,CAAA,mBAAgB,AAAD,EAAE;QAEpC,iDAAiD;QACjD,MAAM,MAAM,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,UAAU,WAAW;QAC9C,MAAM,cAAc;YAClB,QAAQ;YACR,SAAS;YACT,QAAQ;YACR,QAAQ;YACR,QAAQ;YACR,QAAQ;YACR,SAAS;YACT,QAAQ;QACV,CAAC,CAAC,IAAI,IAAI;QAEV,kDAAkD;QAClD,OAAO,IAAI,gIAAA,CAAA,eAAY,CAAC,YAAmB;YACzC,SAAS;gBACP,gBAAgB;gBAChB,kBAAkB,MAAM,IAAI,CAAC,QAAQ;gBACrC,iBAAiB;YACnB;QACF;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAqB,GAC9B;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,OACpB,OAAgB,EAChB,EAAE,MAAM,EAAkC;IAE1C,IAAI;QACF,oDAAoD;QACpD,MAAM,WAAW,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,cAAc,OAAO,IAAI;QAEnE,uBAAuB;QACvB,MAAM,CAAA,GAAA,qHAAA,CAAA,OAAI,AAAD,EAAE;QAEX,kBAAkB;QAClB,MAAM,CAAA,GAAA,qHAAA,CAAA,SAAM,AAAD,EAAE;QAEb,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA4B;IAElE,EAAE,OAAO,OAAY;QACnB,IAAI,MAAM,IAAI,KAAK,UAAU;YAC3B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ;YAAI;QAElB;QACA,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAsB,GAC/B;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}